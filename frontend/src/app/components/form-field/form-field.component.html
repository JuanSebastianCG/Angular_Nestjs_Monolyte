<div class="form-field">
  <label [for]="inputId" class="label">{{ label }}</label>

  <div class="input-wrapper" [ngClass]="{ 'is-invalid': hasError }">
    <!-- Text or password input -->
    <ng-container *ngIf="!isSelect && !isDate">
      <input
        [type]="type"
        [id]="inputId"
        [formControl]="$any(control)"
        class="form-control"
        [placeholder]="placeholder"
      />
    </ng-container>

    <!-- Select input -->
    <ng-container *ngIf="isSelect">
      <select
        [id]="inputId"
        [formControl]="$any(control)"
        class="form-control dropdown"
        (change)="selectionChange.emit(control.value)"
      >
        <option value="" disabled>Seleccione una opci√≥n</option>
        <option *ngFor="let option of options" [value]="option.value">
          {{ option.label }}
        </option>
      </select>

      <!-- Custom dropdown triangle -->
      <div class="dropdown-icon"></div>
    </ng-container>

    <!-- Date input -->
    <ng-container *ngIf="isDate">
      <input
        type="date"
        [id]="inputId"
        [formControl]="$any(control)"
        class="form-control"
        [placeholder]="placeholder"
      />

      <!-- Calendar icon -->
      <div class="calendar-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
        >
          <path
            d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"
          />
        </svg>
      </div>
    </ng-container>
  </div>

  <!-- Error message -->
  <div *ngIf="hasError" class="error-message">
    {{ errorMessage }}
  </div>
</div>
